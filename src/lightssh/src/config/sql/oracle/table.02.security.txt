
drop table T_SECURITY_LOGINACCOUNT cascade constraints;
drop table T_SECURITY_LOGINACCOUNT_CHANGE cascade constraints;
drop table T_SECURITY_LOGINACCOUNT_AUDIT cascade constraints;
drop table T_SECURITY_LOGIN_FAILURE cascade constraints;
drop table T_SECURITY_SAFEQUESTION cascade constraints;
drop table T_SECURITY_ROLE cascade constraints;
drop table T_SECURITY_ROLE_CHANGE cascade constraints;
drop table T_SECURITY_ROLE_AUDIT cascade constraints;
drop table T_SECURITY_PARTY_ROLE cascade constraints;
drop table T_SECURITY_PERMISSION cascade constraints;
drop table T_SECURITY_NAVIGATION cascade constraints;
drop table T_SECURITY_AUTH_RES cascade constraints;
drop table T_SECURITY_AUTH_TICKET cascade constraints;
drop table T_REF_LOGINACCOUNT_ROLE cascade constraints;
drop table T_REF_ROLE_PERMISSION cascade constraints;
drop table T_LOG_LOGIN cascade constraints;

--------------------------------------------------------
--[02-01]系统登录帐号 T_SECURITY_LOGINACCOUNT
--------------------------------------------------------
CREATE TABLE "T_SECURITY_LOGINACCOUNT"(	
  "ID" NUMBER, 
  "LOGIN_NAME" VARCHAR2(20 CHAR), 
  "PASSWORD" VARCHAR2(100 CHAR), 
  "MOBILE" VARCHAR2(20 CHAR), 
  "EMAIL" VARCHAR2(100 CHAR), 
  "STATUS" VARCHAR2(20 CHAR),
  "PERIOD_START" DATE, 
  "PERIOD_END" DATE, 
  "CREATE_DATE" DATE, 
  "PARTY_ID" VARCHAR2(100 CHAR), 
  "TYPE" VARCHAR2(20 CHAR), 
  "USE_CA" NUMBER(1,0), 
  "LAST_UPDATE_PASSWORD_TIME" DATE, 
  "LAST_LOGIN_LOCK_TIME" DATE, 
  "LAST_LOGIN_TIME" DATE, 
  "DESCRIPTION" VARCHAR2(200 CHAR)
)TABLESPACE "LIGHTSSH_TBS"
;

ALTER TABLE "T_SECURITY_LOGINACCOUNT" ADD CONSTRAINT "PK_SECURITY_LOGINACCOUNT" PRIMARY KEY ("ID");
ALTER TABLE "T_SECURITY_LOGINACCOUNT" MODIFY ("ID" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_LOGINACCOUNT" MODIFY ("LOGIN_NAME" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_LOGINACCOUNT" MODIFY ("PASSWORD" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_LOGINACCOUNT" MODIFY ("STATUS" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_LOGINACCOUNT" MODIFY ("CREATE_DATE" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_LOGINACCOUNT" MODIFY ("TYPE" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_LOGINACCOUNT" ADD CONSTRAINT "UK_T_SEC_LOGINACC_EMAIL" UNIQUE ("EMAIL");
ALTER TABLE "T_SECURITY_LOGINACCOUNT" ADD CONSTRAINT "UK_T_SEC_LOGINACC_LOGINNAME" UNIQUE ("LOGIN_NAME");
ALTER TABLE "T_SECURITY_LOGINACCOUNT" ADD CONSTRAINT "UK_T_SEC_LOGINACC_MOBILE" UNIQUE ("MOBILE");

COMMENT ON COLUMN "T_SECURITY_LOGINACCOUNT"."ID" IS '主键';
COMMENT ON COLUMN "T_SECURITY_LOGINACCOUNT"."LOGIN_NAME" IS '登录名称';
COMMENT ON COLUMN "T_SECURITY_LOGINACCOUNT"."PASSWORD" IS '登录密码 密文';
COMMENT ON COLUMN "T_SECURITY_LOGINACCOUNT"."MOBILE" IS '手机号码';
COMMENT ON COLUMN "T_SECURITY_LOGINACCOUNT"."EMAIL" IS '邮箱地址';
COMMENT ON COLUMN "T_SECURITY_LOGINACCOUNT"."STATUS" IS '状态';
COMMENT ON COLUMN "T_SECURITY_LOGINACCOUNT"."PERIOD_START" IS '登录帐户有效期-开始时间';
COMMENT ON COLUMN "T_SECURITY_LOGINACCOUNT"."PERIOD_END" IS '登录帐户有效期-结束时间';
COMMENT ON COLUMN "T_SECURITY_LOGINACCOUNT"."CREATE_DATE" IS '创建时间';
COMMENT ON COLUMN "T_SECURITY_LOGINACCOUNT"."PARTY_ID" IS '关联的客户';
COMMENT ON COLUMN "T_SECURITY_LOGINACCOUNT"."TYPE" IS '用户类型';
COMMENT ON COLUMN "T_SECURITY_LOGINACCOUNT"."USE_CA" IS '是否使用CA登录，预留字段';
COMMENT ON COLUMN "T_SECURITY_LOGINACCOUNT"."LAST_UPDATE_PASSWORD_TIME" IS '最后一次更新密码时间';
COMMENT ON COLUMN "T_SECURITY_LOGINACCOUNT"."LAST_LOGIN_LOCK_TIME" IS '最近一次登录失败锁定时间';
COMMENT ON COLUMN "T_SECURITY_LOGINACCOUNT"."LAST_LOGIN_TIME" IS '最近一次登录时间';
COMMENT ON COLUMN "T_SECURITY_LOGINACCOUNT"."DESCRIPTION" IS '备注';
COMMENT ON TABLE "T_SECURITY_LOGINACCOUNT"  IS '登录帐户表';

--------------------------------------------------------
--[02-02]系统登录失败记录 T_SECURITY_LOGIN_FAILURE
--------------------------------------------------------
CREATE TABLE "T_SECURITY_LOGIN_FAILURE"(	
  "ID" VARCHAR2(50 CHAR), 
  "USER_ID" NUMBER(19,0), 
  "LOGIN_NAME" VARCHAR2(50 CHAR), 
  "IP" VARCHAR2(10 CHAR), 
  "FAILURE_COUNT" NUMBER(10,0), 
  "SESSION_ID" VARCHAR2(50 CHAR), 
  "CREATED_TIME" DATE,
  "LAST_UPDATE_TIME" DATE
)TABLESPACE "LIGHTSSH_TBS"
;

ALTER TABLE "T_SECURITY_LOGIN_FAILURE" ADD CONSTRAINT "PK_SECURITY_LOGIN_FAILURE" PRIMARY KEY ("ID");
ALTER TABLE "T_SECURITY_LOGIN_FAILURE" MODIFY ("ID" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_LOGIN_FAILURE" MODIFY ("USER_ID" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_LOGIN_FAILURE" MODIFY ("LOGIN_NAME" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_LOGIN_FAILURE" MODIFY ("IP" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_LOGIN_FAILURE" MODIFY ("FAILURE_COUNT" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_LOGIN_FAILURE" MODIFY ("SESSION_ID" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_LOGIN_FAILURE" MODIFY ("CREATED_TIME" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_LOGIN_FAILURE" ADD CONSTRAINT "FK_SECURITY_LOGIN_FAILURE" FOREIGN KEY ("USER_ID")
  REFERENCES "T_SECURITY_LOGINACCOUNT" ("ID") ENABLE;

COMMENT ON COLUMN "T_SECURITY_LOGIN_FAILURE"."ID" IS '主键，UUID';
COMMENT ON COLUMN "T_SECURITY_LOGIN_FAILURE"."USER_ID" IS '关联登录帐户表';
COMMENT ON COLUMN "T_SECURITY_LOGIN_FAILURE"."LOGIN_NAME" IS '登录用户名';
COMMENT ON COLUMN "T_SECURITY_LOGIN_FAILURE"."IP" IS 'IP地址';
COMMENT ON COLUMN "T_SECURITY_LOGIN_FAILURE"."FAILURE_COUNT" IS '失败次数 同一SESSION登录，记录的失败次数。';
COMMENT ON COLUMN "T_SECURITY_LOGIN_FAILURE"."SESSION_ID" IS 'SESSION ID值';
COMMENT ON COLUMN "T_SECURITY_LOGIN_FAILURE"."CREATED_TIME" IS '创建时间';
COMMENT ON COLUMN "T_SECURITY_LOGIN_FAILURE"."LAST_UPDATE_TIME" IS '最后一次更新时间';
COMMENT ON TABLE "T_SECURITY_LOGIN_FAILURE"  IS '登录失败记录';

--------------------------------------------------------
--[02-03]系统用户安全问题 T_SECURITY_SAFEQUESTION
--------------------------------------------------------
CREATE TABLE "T_SECURITY_SAFEQUESTION"(	
  "ID" VARCHAR2(255 CHAR), 
  "QUESTION" VARCHAR2(100 CHAR), 
  "ANSWER" VARCHAR2(200 CHAR), 
  "ACCOUNT_ID" NUMBER(19,0),
  "CREATED_TIME" DATE
) TABLESPACE "LIGHTSSH_TBS"
;
 
ALTER TABLE "T_SECURITY_SAFEQUESTION" MODIFY ("ID" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_SAFEQUESTION" ADD PRIMARY KEY ("ID");

COMMENT ON COLUMN "T_SECURITY_SAFEQUESTION"."ID" IS '主键';
COMMENT ON COLUMN "T_SECURITY_SAFEQUESTION"."CREATED_TIME" IS '创建时间';
COMMENT ON COLUMN "T_SECURITY_SAFEQUESTION"."QUESTION" IS '问题';
COMMENT ON COLUMN "T_SECURITY_SAFEQUESTION"."ANSWER" IS '答案';
COMMENT ON COLUMN "T_SECURITY_SAFEQUESTION"."ACCOUNT_ID" IS '用户帐户 ';

--------------------------------------------------------
--[02-04]登录帐户变更 T_SECURITY_LOGINACCOUNT_CHANGE
--------------------------------------------------------
CREATE TABLE "T_SECURITY_LOGINACCOUNT_CHANGE" (	
  "ID" VARCHAR2(50 CHAR), 
  "USER_ID" NUMBER(9,0), 
  "TYPE" VARCHAR2(20 CHAR), 
  "STATUS" VARCHAR2(20 CHAR), 
  "ORIGINAL_OBJECT" BLOB, 
  "NEW_OBJECT" BLOB, 
  "LOGINACCOUNT_ID" NUMBER(16,0), 
  "CREATED_TIME" DATE,
  "DESCRIPTION" VARCHAR2(200 CHAR)
) TABLESPACE "LIGHTSSH_TBS"
;
 
ALTER TABLE "T_SECURITY_LOGINACCOUNT_CHANGE" ADD CONSTRAINT "T_SECURITY_LOGINACC_CHANGE_PK" PRIMARY KEY ("ID");

ALTER TABLE "T_SECURITY_LOGINACCOUNT_CHANGE" ADD CONSTRAINT "FK_TSLC_LOGINACCOUNT_ID_TSL_ID" FOREIGN KEY ("LOGINACCOUNT_ID")
  REFERENCES "T_SECURITY_LOGINACCOUNT" ("ID") ENABLE;

ALTER TABLE "T_SECURITY_LOGINACCOUNT_CHANGE" ADD CONSTRAINT "FK_TSLC_USERID_TSLA_ID" FOREIGN KEY ("USER_ID")
  REFERENCES "T_SECURITY_LOGINACCOUNT" ("ID") ENABLE;

COMMENT ON COLUMN "T_SECURITY_LOGINACCOUNT_CHANGE"."ID" IS '主键';
COMMENT ON COLUMN "T_SECURITY_LOGINACCOUNT_CHANGE"."USER_ID" IS '操作员';
COMMENT ON COLUMN "T_SECURITY_LOGINACCOUNT_CHANGE"."TYPE" IS '类型';
COMMENT ON COLUMN "T_SECURITY_LOGINACCOUNT_CHANGE"."STATUS" IS '状态';
COMMENT ON COLUMN "T_SECURITY_LOGINACCOUNT_CHANGE"."ORIGINAL_OBJECT" IS '原始登录帐户';
COMMENT ON COLUMN "T_SECURITY_LOGINACCOUNT_CHANGE"."DESCRIPTION" IS '备注';
COMMENT ON COLUMN "T_SECURITY_LOGINACCOUNT_CHANGE"."NEW_OBJECT" IS '新登录帐户';
COMMENT ON COLUMN "T_SECURITY_LOGINACCOUNT_CHANGE"."LOGINACCOUNT_ID" IS '关联登录帐户';
COMMENT ON COLUMN "T_SECURITY_LOGINACCOUNT_CHANGE"."CREATED_TIME" IS '创建时间';

--------------------------------------------------------
--[02-05] 登录帐户审核 T_SECURITY_LOGINACCOUNT_AUDIT
--------------------------------------------------------
CREATE TABLE "T_SECURITY_LOGINACCOUNT_AUDIT"(	
  "ID" VARCHAR2(50 CHAR), 
  "LOGINACCOUNT_CHANGE_ID"  VARCHAR2(50 CHAR), 
  "USER_ID" NUMBER(16,0), 
  "RESULT" VARCHAR2(50 CHAR), 
  "DESCRIPTION" VARCHAR2(200 CHAR), 
  "CREATED_TIME" DATE
)TABLESPACE "LIGHTSSH_TBS"
;
 
ALTER TABLE "T_SECURITY_LOGINACCOUNT_AUDIT" MODIFY ("ID" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_LOGINACCOUNT_AUDIT" MODIFY ("LOGINACCOUNT_CHANGE_ID" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_LOGINACCOUNT_AUDIT" MODIFY ("USER_ID" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_LOGINACCOUNT_AUDIT" MODIFY ("RESULT" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_LOGINACCOUNT_AUDIT" MODIFY ("CREATED_TIME" NOT NULL ENABLE);

ALTER TABLE "T_SECURITY_LOGINACCOUNT_AUDIT" ADD CONSTRAINT "T_SECURITY_LOGINACC_AUDIT_PK" PRIMARY KEY ("ID");

ALTER TABLE "T_SECURITY_LOGINACCOUNT_AUDIT" ADD CONSTRAINT "FK_TSLA_LOGINACCOUNTID_TSLC_ID" FOREIGN KEY ("LOGINACCOUNT_CHANGE_ID")
  REFERENCES "T_SECURITY_LOGINACCOUNT_CHANGE" ("ID") ENABLE;

ALTER TABLE "T_SECURITY_LOGINACCOUNT_AUDIT" ADD CONSTRAINT "FK_TSLA_USERID_TSLA_ID" FOREIGN KEY ("USER_ID")
  REFERENCES "T_SECURITY_LOGINACCOUNT" ("ID") ENABLE;

COMMENT ON COLUMN "T_SECURITY_LOGINACCOUNT_AUDIT"."ID" IS '主键';
COMMENT ON COLUMN "T_SECURITY_LOGINACCOUNT_AUDIT"."LOGINACCOUNT_CHANGE_ID" IS '关联登录帐户变更ID';
COMMENT ON COLUMN "T_SECURITY_LOGINACCOUNT_AUDIT"."USER_ID" IS '关联系统用户';
COMMENT ON COLUMN "T_SECURITY_LOGINACCOUNT_AUDIT"."RESULT" IS '审核结果';
COMMENT ON COLUMN "T_SECURITY_LOGINACCOUNT_AUDIT"."DESCRIPTION" IS '备注';
COMMENT ON COLUMN "T_SECURITY_LOGINACCOUNT_AUDIT"."CREATED_TIME" IS '创建时间';


--------------------------------------------------------
--[02-06]系统角色 T_SECURITY_ROLE
--------------------------------------------------------
CREATE TABLE "T_SECURITY_ROLE" (	
  "ID" VARCHAR2(50 CHAR), 
  "CREATED_TIME" DATE, 
  "NAME" VARCHAR2(100 CHAR), 
  "READONLY" NUMBER(1,0), 
  "STATUS" VARCHAR2(20 CHAR),
  "DESCRIPTION" VARCHAR2(200 CHAR)
)TABLESPACE "LIGHTSSH_TBS"
;

ALTER TABLE "T_SECURITY_ROLE" ADD CONSTRAINT "PK_SECURITY_ROLE" PRIMARY KEY ("ID");
ALTER TABLE "T_SECURITY_ROLE" MODIFY ("ID" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_ROLE" MODIFY ("CREATED_TIME" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_ROLE" MODIFY ("NAME" NOT NULL ENABLE); 

COMMENT ON COLUMN "T_SECURITY_ROLE"."ID" IS '主键，UUID';
COMMENT ON COLUMN "T_SECURITY_ROLE"."CREATED_TIME" IS '创建时间';
COMMENT ON COLUMN "T_SECURITY_ROLE"."NAME" IS '角色名称';
COMMENT ON COLUMN "T_SECURITY_ROLE"."READONLY" IS '是否只读 1表示true,0或null表示false';
COMMENT ON COLUMN "T_SECURITY_ROLE"."STATUS" IS '状态';
COMMENT ON COLUMN "T_SECURITY_ROLE"."DESCRIPTION" IS '备注';
COMMENT ON TABLE "T_SECURITY_ROLE"  IS '角色表';

--------------------------------------------------------
--[02-07]系统权限 T_SECURITY_PERMISSION
--------------------------------------------------------
CREATE TABLE "T_SECURITY_PERMISSION" (
  "TOKEN" VARCHAR2(50 CHAR), 
  "URL" VARCHAR2(300 CHAR), 
  "DESCRIPTION" VARCHAR2(200 CHAR)
)
TABLESPACE "LIGHTSSH_TBS" ;
 
ALTER TABLE "T_SECURITY_PERMISSION" ADD CONSTRAINT "PK_SECURITY_PERMISSION" PRIMARY KEY ("TOKEN");
ALTER TABLE "T_SECURITY_PERMISSION" MODIFY ("TOKEN" NOT NULL ENABLE);

COMMENT ON COLUMN "T_SECURITY_PERMISSION"."TOKEN" IS '主键';
COMMENT ON COLUMN "T_SECURITY_PERMISSION"."URL" IS 'TOKEN控制的URL资源';
COMMENT ON COLUMN "T_SECURITY_PERMISSION"."DESCRIPTION" IS '备注';
COMMENT ON TABLE "T_SECURITY_PERMISSION"  IS '权限表';

--------------------------------------------------------
--[02-08] 角色变更 T_SECURITY_ROLE_CHANGE
--------------------------------------------------------
CREATE TABLE "T_SECURITY_ROLE_CHANGE" (	
  "ID" VARCHAR2(50 CHAR), 
  "USER_ID" NUMBER(9,0), 
  "TYPE" VARCHAR2(20 CHAR), 
  "STATUS" VARCHAR2(20 CHAR), 
  "ORIGINAL_OBJECT" BLOB, 
  "NEW_OBJECT" BLOB, 
  "ROLE_ID" VARCHAR2(50 CHAR), 
  "CREATED_TIME" DATE,
  "DESCRIPTION" VARCHAR2(200 CHAR)
) TABLESPACE "LIGHTSSH_TBS";
 
ALTER TABLE "T_SECURITY_ROLE_CHANGE" ADD CONSTRAINT "T_SECURITY_ROLE_CHANGE_PK" PRIMARY KEY ("ID");

ALTER TABLE "T_SECURITY_ROLE_CHANGE" ADD CONSTRAINT "FK_TSRC_ROLEID_TSR_ID" FOREIGN KEY ("ROLE_ID")
  REFERENCES "T_SECURITY_ROLE" ("ID") ENABLE;

ALTER TABLE "T_SECURITY_ROLE_CHANGE" ADD CONSTRAINT "FK_TSRC_USERID_TSLA_ID" FOREIGN KEY ("USER_ID")
  REFERENCES "T_SECURITY_LOGINACCOUNT" ("ID") ENABLE;

COMMENT ON COLUMN "T_SECURITY_ROLE_CHANGE"."ID" IS '主键';
COMMENT ON COLUMN "T_SECURITY_ROLE_CHANGE"."USER_ID" IS '操作员';
COMMENT ON COLUMN "T_SECURITY_ROLE_CHANGE"."TYPE" IS '类型';
COMMENT ON COLUMN "T_SECURITY_ROLE_CHANGE"."STATUS" IS '状态';
COMMENT ON COLUMN "T_SECURITY_ROLE_CHANGE"."ORIGINAL_OBJECT" IS '原始角色';
COMMENT ON COLUMN "T_SECURITY_ROLE_CHANGE"."DESCRIPTION" IS '备注';
COMMENT ON COLUMN "T_SECURITY_ROLE_CHANGE"."NEW_OBJECT" IS '新角色';
COMMENT ON COLUMN "T_SECURITY_ROLE_CHANGE"."ROLE_ID" IS '关联角色';
COMMENT ON COLUMN "T_SECURITY_ROLE_CHANGE"."CREATED_TIME" IS '创建时间';

--------------------------------------------------------
--[02-09] 角色审核 T_SECURITY_ROLE_AUDIT
--------------------------------------------------------
CREATE TABLE "T_SECURITY_ROLE_AUDIT"(	
  "ID" VARCHAR2(50 CHAR), 
  "ROLE_CHANGE_ID" VARCHAR2(50 CHAR), 
  "USER_ID" NUMBER(9,0), 
  "RESULT" VARCHAR2(50 CHAR), 
  "DESCRIPTION" VARCHAR2(200 CHAR), 
  "CREATED_TIME" DATE
)TABLESPACE "LIGHTSSH_TBS";
 
ALTER TABLE "T_SECURITY_ROLE_AUDIT" MODIFY ("ID" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_ROLE_AUDIT" MODIFY ("ROLE_CHANGE_ID" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_ROLE_AUDIT" MODIFY ("USER_ID" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_ROLE_AUDIT" MODIFY ("RESULT" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_ROLE_AUDIT" MODIFY ("CREATED_TIME" NOT NULL ENABLE);

ALTER TABLE "T_SECURITY_ROLE_AUDIT" ADD CONSTRAINT "T_SECURITY_ROLE_AUDIT_PK" PRIMARY KEY ("ID");

ALTER TABLE "T_SECURITY_ROLE_AUDIT" ADD CONSTRAINT "FK_TSRA_ROLEID_TSRC_ID" FOREIGN KEY ("ROLE_CHANGE_ID")
  REFERENCES "T_SECURITY_ROLE_CHANGE" ("ID") ENABLE;

ALTER TABLE "T_SECURITY_ROLE_AUDIT" ADD CONSTRAINT "FK_TSRA_USERID_TSLA_ID" FOREIGN KEY ("USER_ID")
  REFERENCES "T_SECURITY_LOGINACCOUNT" ("ID") ENABLE;

COMMENT ON COLUMN "T_SECURITY_ROLE_AUDIT"."ID" IS '主键';
COMMENT ON COLUMN "T_SECURITY_ROLE_AUDIT"."ROLE_CHANGE_ID" IS '关联角色变更ID';
COMMENT ON COLUMN "T_SECURITY_ROLE_AUDIT"."USER_ID" IS '关联系统用户';
COMMENT ON COLUMN "T_SECURITY_ROLE_AUDIT"."RESULT" IS '审核结果';
COMMENT ON COLUMN "T_SECURITY_ROLE_AUDIT"."DESCRIPTION" IS '备注';
COMMENT ON COLUMN "T_SECURITY_ROLE_AUDIT"."CREATED_TIME" IS '创建时间';

--------------------------------------------------------
--[02-10] 机构拥有的角色 T_SECURITY_PARTY_ROLE
--------------------------------------------------------
CREATE TABLE "T_SECURITY_PARTY_ROLE" (	
  "ID" VARCHAR2(50 CHAR), 
  "CREATED_TIME" DATE, 
  "PARTY_ID" VARCHAR2(50 CHAR), 
  "ROLE_ID" VARCHAR2(50 CHAR),
  "DESCRIPTION" VARCHAR2(255 CHAR)
)TABLESPACE "LIGHTSSH_TBS";

ALTER TABLE "T_SECURITY_PARTY_ROLE" MODIFY ("ID" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_PARTY_ROLE" MODIFY ("CREATED_TIME" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_PARTY_ROLE" MODIFY ("PARTY_ID" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_PARTY_ROLE" MODIFY ("ROLE_ID" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_PARTY_ROLE" ADD CONSTRAINT "T_SECURITY_PARTY_ROLE_PK" PRIMARY KEY ("ID");
ALTER TABLE "T_SECURITY_PARTY_ROLE" ADD CONSTRAINT "UK_TSPR_PID_RID" UNIQUE ("PARTY_ID", "ROLE_ID");

COMMENT ON COLUMN "T_SECURITY_PARTY_ROLE"."ID" IS '主键';
COMMENT ON COLUMN "T_SECURITY_PARTY_ROLE"."ROLE_ID" IS '关联角色';
COMMENT ON COLUMN "T_SECURITY_PARTY_ROLE"."PARTY_ID" IS '机构ID';
COMMENT ON COLUMN "T_SECURITY_PARTY_ROLE"."DESCRIPTION" IS '备注';
COMMENT ON COLUMN "T_SECURITY_PARTY_ROLE"."CREATED_TIME" IS '创建时间';

--------------------------------------------------------
--[02-11]系统权限资源导航树 T_SECURITY_NAVIGATION
--------------------------------------------------------
CREATE TABLE "T_SECURITY_NAVIGATION"(	
  "ID" VARCHAR2(50 CHAR), 
  "CREATED_TIME" DATE, 
  "NAME" VARCHAR2(100 CHAR), 
  "SEQUENCE" NUMBER(10,0), 
  "PARENT_ID" VARCHAR2(50 CHAR), 
  "PERMISSION_ID" VARCHAR2(50 CHAR), 
  "DESCRIPTION" VARCHAR2(200 CHAR)
)TABLESPACE "LIGHTSSH_TBS";

ALTER TABLE "T_SECURITY_NAVIGATION" ADD CONSTRAINT "PK_SECURITY_NAVIGATION" PRIMARY KEY ("ID");
ALTER TABLE "T_SECURITY_NAVIGATION" MODIFY ("ID" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_NAVIGATION" MODIFY ("CREATED_TIME" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_NAVIGATION" MODIFY ("NAME" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_NAVIGATION" ADD CONSTRAINT "FK_PARENT_ID_TO_ID" FOREIGN KEY ("PARENT_ID")
  REFERENCES "T_SECURITY_NAVIGATION" ("ID") ENABLE;
ALTER TABLE "T_SECURITY_NAVIGATION" ADD CONSTRAINT "FK_T_SECURITY_PERMISSION_TOKEN" FOREIGN KEY ("PERMISSION_ID")
  REFERENCES "T_SECURITY_PERMISSION" ("TOKEN") ENABLE;

COMMENT ON COLUMN "T_SECURITY_NAVIGATION"."ID" IS '主键，UUID';
COMMENT ON COLUMN "T_SECURITY_NAVIGATION"."CREATED_TIME" IS '创建时间';
COMMENT ON COLUMN "T_SECURITY_NAVIGATION"."NAME" IS '名称';
COMMENT ON COLUMN "T_SECURITY_NAVIGATION"."SEQUENCE" IS '序号';
COMMENT ON COLUMN "T_SECURITY_NAVIGATION"."PARENT_ID" IS '父结点ID';
COMMENT ON COLUMN "T_SECURITY_NAVIGATION"."PERMISSION_ID" IS '所关联权限';
COMMENT ON COLUMN "T_SECURITY_NAVIGATION"."DESCRIPTION" IS '备注';
COMMENT ON TABLE "T_SECURITY_NAVIGATION"  IS '权限导航表';

--------------------------------------------------------
--[02-12]登录帐户与角色关联表 
--------------------------------------------------------
CREATE TABLE "T_REF_LOGINACCOUNT_ROLE"(	
  "LOGINACCOUNT_ID" NUMBER(19,0), 
  "ROLE_ID" VARCHAR2(255 CHAR)
)TABLESPACE "LIGHTSSH_TBS" ;

ALTER TABLE "T_REF_LOGINACCOUNT_ROLE" MODIFY ("LOGINACCOUNT_ID" NOT NULL ENABLE);
ALTER TABLE "T_REF_LOGINACCOUNT_ROLE" MODIFY ("ROLE_ID" NOT NULL ENABLE);
ALTER TABLE "T_REF_LOGINACCOUNT_ROLE" ADD PRIMARY KEY ("LOGINACCOUNT_ID", "ROLE_ID");
ALTER TABLE "T_REF_LOGINACCOUNT_ROLE" ADD CONSTRAINT "FK45A2C6BAC5F52AEF" FOREIGN KEY ("ROLE_ID")
  REFERENCES "T_SECURITY_ROLE" ("ID") ENABLE;

--------------------------------------------------------
--[02-13]系统用户安全-登录角色与权限关联表  
--------------------------------------------------------
CREATE TABLE "T_REF_ROLE_PERMISSION" (	
  "ROLE_ID" VARCHAR2(255 CHAR), 
  "PERMISSION_ID" VARCHAR2(100 CHAR)
)TABLESPACE "LIGHTSSH_TBS";

ALTER TABLE "T_REF_ROLE_PERMISSION" ADD PRIMARY KEY ("ROLE_ID", "PERMISSION_ID");
ALTER TABLE "T_REF_ROLE_PERMISSION" MODIFY ("ROLE_ID" NOT NULL ENABLE);
ALTER TABLE "T_REF_ROLE_PERMISSION" MODIFY ("PERMISSION_ID" NOT NULL ENABLE);
ALTER TABLE "T_REF_ROLE_PERMISSION" ADD CONSTRAINT "FK53273101A1F3348F" FOREIGN KEY ("PERMISSION_ID")
  REFERENCES "T_SECURITY_PERMISSION" ("TOKEN") ENABLE;
ALTER TABLE "T_REF_ROLE_PERMISSION" ADD CONSTRAINT "FK53273101C5F52AEF" FOREIGN KEY ("ROLE_ID")
  REFERENCES "T_SECURITY_ROLE" ("ID") ENABLE;
  
--------------------------------------------------------
--[02-14] 可授权资源T_SECURITY_AUTH_RES
--------------------------------------------------------
CREATE TABLE "T_SECURITY_AUTH_RES"  (	
  "URL" VARCHAR2(300 CHAR), 
  "ENABLED" NUMBER(1,0), 
  "CREATED_TIME" DATE, 
  "DESCRIPTION" VARCHAR2(200 CHAR)
) TABLESPACE "LIGHTSSH_TBS";
 
ALTER TABLE "T_SECURITY_AUTH_RES" MODIFY ("ENABLED" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_AUTH_RES" MODIFY ("CREATED_TIME" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_AUTH_RES" MODIFY ("URL" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_AUTH_RES" ADD CONSTRAINT "T_SECURITY_AUTH_RES_PK" PRIMARY KEY ("URL");

COMMENT ON COLUMN "T_SECURITY_AUTH_RES"."URL" IS '主键,资源URL';
COMMENT ON COLUMN "T_SECURITY_AUTH_RES"."ENABLED" IS '是否有效';
COMMENT ON COLUMN "T_SECURITY_AUTH_RES"."CREATED_TIME" IS '创建时间';
COMMENT ON COLUMN "T_SECURITY_AUTH_RES"."DESCRIPTION" IS '备注';

--------------------------------------------------------
--[02-15] 授权令牌 T_SECURITY_AUTH_TICKET
--------------------------------------------------------
CREATE TABLE "T_SECURITY_AUTH_TICKET"(	
  "ID" VARCHAR2(50 CHAR), 
  "URL" VARCHAR2(300 CHAR), 
  "TOKEN" VARCHAR2(100 CHAR), 
  "SCOPE" VARCHAR2(20 CHAR), 
  "SESSION_ID" VARCHAR2(100 CHAR), 
  "LICENSOR" VARCHAR2(20 CHAR), 
  "GRANTOR" VARCHAR2(20 CHAR), 
  "VALID_TIME" DATE, 
  "MAX_COUNT" NUMBER(16), 
  "AUTH_COUNT" NUMBER(16), 
  "CREATED_TIME" DATE
)TABLESPACE "LIGHTSSH_TBS";
 
ALTER TABLE "T_SECURITY_AUTH_TICKET" MODIFY ("URL" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_AUTH_TICKET" MODIFY ("TOKEN" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_AUTH_TICKET" MODIFY ("SCOPE" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_AUTH_TICKET" MODIFY ("SESSION_ID" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_AUTH_TICKET" MODIFY ("LICENSOR" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_AUTH_TICKET" MODIFY ("GRANTOR" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_AUTH_TICKET" MODIFY ("CREATED_TIME" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_AUTH_TICKET" MODIFY ("AUTH_COUNT" DEFAULT 0 NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_AUTH_TICKET" MODIFY ("ID" NOT NULL ENABLE);
ALTER TABLE "T_SECURITY_AUTH_TICKET" ADD CONSTRAINT "T_SECURITY_AUTH_TICKET_PK" PRIMARY KEY ("ID");

COMMENT ON COLUMN "T_SECURITY_AUTH_TICKET"."ID" IS '主键';
COMMENT ON COLUMN "T_SECURITY_AUTH_TICKET"."URL" IS '资源URL';
COMMENT ON COLUMN "T_SECURITY_AUTH_TICKET"."TOKEN" IS '权限令牌';
COMMENT ON COLUMN "T_SECURITY_AUTH_TICKET"."SCOPE" IS '授权范围 ONCE:一次 SESSION:会话中有效 PERIOD:指定的一段时间';
COMMENT ON COLUMN "T_SECURITY_AUTH_TICKET"."SESSION_ID" IS 'SESSION ID值';
COMMENT ON COLUMN "T_SECURITY_AUTH_TICKET"."LICENSOR" IS '授权用户';
COMMENT ON COLUMN "T_SECURITY_AUTH_TICKET"."GRANTOR" IS '被授权用户';
COMMENT ON COLUMN "T_SECURITY_AUTH_TICKET"."VALID_TIME" IS '失效时间';
COMMENT ON COLUMN "T_SECURITY_AUTH_TICKET"."MAX_COUNT" IS '最大授权次数';
COMMENT ON COLUMN "T_SECURITY_AUTH_TICKET"."AUTH_COUNT" IS '实际授权次数';
COMMENT ON COLUMN "T_SECURITY_AUTH_TICKET"."CREATED_TIME" IS '创建时间';

--------------------------------------------------------
--[02-16]日志-系统用户登录日志 T_LOG_LOGIN
--------------------------------------------------------
CREATE TABLE "T_LOG_LOGIN" (	
  "ID" VARCHAR2(255 CHAR), 
  "CREATED_TIME" TIMESTAMP (6), 
  "DESCRIPTION" VARCHAR2(255 CHAR), 
  "IP" VARCHAR2(255 CHAR), 
  "OPERATOR" VARCHAR2(255 CHAR)
)TABLESPACE "LIGHTSSH_TBS";
 
ALTER TABLE "T_LOG_LOGIN" MODIFY ("ID" NOT NULL ENABLE);
ALTER TABLE "T_LOG_LOGIN" ADD PRIMARY KEY ("ID");

COMMENT ON COLUMN "T_LOG_LOGIN"."ID" IS '主键';
COMMENT ON COLUMN "T_LOG_LOGIN"."CREATED_TIME" IS '创建时间';
COMMENT ON COLUMN "T_LOG_LOGIN"."DESCRIPTION" IS '备注';
COMMENT ON COLUMN "T_LOG_LOGIN"."IP" IS 'IP';
COMMENT ON COLUMN "T_LOG_LOGIN"."OPERATOR" IS '登录用户';

